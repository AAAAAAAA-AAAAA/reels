<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reels Social Media</title>
    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f0f2f5;
        }
        .header {
            background: #fff;
            padding: 16px 32px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .header .logo {
            font-size: 1.7rem;
            font-weight: bold;
            color: #1877f2;
            letter-spacing: 2px;
        }
        .header .search {
            flex: 1;
            margin: 0 24px;
        }
        .header input[type="text"] {
            width: 100%;
            padding: 8px 12px;
            border-radius: 20px;
            border: 1px solid #ddd;
            outline: none;
        }
        .container {
            display: flex;
            max-width: 1200px;
            margin: 32px auto;
            gap: 32px;
        }
        .sidebar {
            width: 220px;
            background: #fff;
            border-radius: 12px;
            padding: 24px 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            height: fit-content;
        }
        .sidebar h3 {
            margin-top: 0;
            color: #1877f2;
        }
        .sidebar ul {
            list-style: none;
            padding: 0;
        }
        .sidebar li {
            margin: 16px 0;
            color: #444;
            cursor: pointer;
        }
        .feed {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 24px;
        }
        .post {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            padding: 20px 24px;
        }
        .post .user {
            font-weight: bold;
            color: #1877f2;
        }
        .post .time {
            color: #888;
            font-size: 0.9em;
            margin-left: 8px;
        }
        .post .content {
            margin: 12px 0 0 0;
            color: #222;
        }
        .post .actions {
            margin-top: 16px;
            display: flex;
            gap: 24px;
        }
        .post .actions span {
            color: #888;
            cursor: pointer;
            font-size: 0.95em;
        }
        .new-post {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            padding: 20px 24px;
            margin-bottom: 24px;
        }
        .new-post textarea {
            width: 100%;
            border-radius: 8px;
            border: 1px solid #ddd;
            padding: 10px;
            resize: none;
            font-size: 1em;
        }
        .new-post button {
            margin-top: 10px;
            background: #1877f2;
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 8px 20px;
            font-size: 1em;
            cursor: pointer;
        }
        @media (max-width: 600px) {
            .container { flex-direction: column; gap: 0; }
            .sidebar { width: 100%; margin-bottom: 24px; }
            .header { flex-direction: column; align-items: flex-start; }
            .header .search, .header .profile, .header-actions { width: 100%; margin: 8px 0; justify-content: flex-end; }
            .header-actions { flex-wrap: wrap; gap: 6px; }
            .feed, .post, .new-post { padding: 8px !important; }
            #searchResults { left: 0; transform: none; min-width: 90vw; }
        }
    </style>
</head>
<body>
    <!-- Login Modal -->
    <div id="loginModal" style="position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.3);display:flex;align-items:center;justify-content:center;z-index:100;">
        <div style="background:#fff;padding:32px 24px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.1);min-width:320px;">
            <h2 style="margin-top:0;color:#1877f2;">Login</h2>
            <div id="g_id_onload"
                data-client_id="YOUR_GOOGLE_CLIENT_ID"
                data-callback="onGoogleSignIn"
                data-auto_prompt="false">
            </div>
            <div class="g_id_signin" data-type="standard" data-size="large" data-theme="outline" data-text="sign_in_with" data-shape="rectangular" data-logo_alignment="left"></div>
            <button onclick="continueAsGuest()" style="width:100%;background:#eee;color:#444;border:none;padding:10px;border-radius:8px;font-size:1em;cursor:pointer;margin-top:16px;">Continue as Guest</button>
        </div>
    </div>
    <!-- User Switch Modal -->
    <div id="userSwitchModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.3);align-items:center;justify-content:center;z-index:200;">
        <div style="background:#fff;padding:24px 20px;border-radius:12px;min-width:300px;">
            <h3>Switch User</h3>
            <input id="switchUserName" type="text" placeholder="User Name" style="width:100%;padding:8px;margin-bottom:12px;border-radius:8px;border:1px solid #ddd;">
            <button onclick="switchUser()" style="width:100%;background:#1877f2;color:#fff;border:none;padding:10px;border-radius:8px;font-size:1em;cursor:pointer;">Switch</button>
            <button onclick="closeUserSwitch()" style="width:100%;background:#eee;color:#444;border:none;padding:10px;border-radius:8px;font-size:1em;cursor:pointer;margin-top:8px;">Cancel</button>
        </div>
    </div>
    <!-- Display Name Modal -->
    <div id="nameModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.3);align-items:center;justify-content:center;z-index:150;">
        <div style="background:#fff;padding:28px 20px;border-radius:12px;min-width:300px;box-shadow:0 2px 8px rgba(0,0,0,0.1);">
            <h3>Set Your Display Name</h3>
            <input id="displayNameInput" type="text" placeholder="Display Name" style="width:100%;padding:8px;margin-bottom:12px;border-radius:8px;border:1px solid #ddd;">
            <button onclick="saveDisplayName()" style="width:100%;background:#1877f2;color:#fff;border:none;padding:10px;border-radius:8px;font-size:1em;cursor:pointer;">Save</button>
        </div>
    </div>
    <div id="notificationBar" style="display:none;position:fixed;top:70px;right:30px;z-index:300;background:#fff;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.1);padding:16px 24px;min-width:220px;"></div>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <div class="header">
        <div class="logo">Reels</div>
        <div class="search">
            <input id="searchInput" type="text" placeholder="Search..." oninput="searchContent()">
        </div>
        <div class="header-actions" style="display:flex;align-items:center;gap:8px;">
            <button id="darkModeBtn" onclick="toggleDarkMode()" style="background:#eee;border:none;border-radius:8px;padding:8px 16px;cursor:pointer;">üåô</button>
            <button onclick="openUserSwitch()" id="switchUserBtn" style="background:#eee;border:none;border-radius:8px;padding:8px 16px;cursor:pointer;">Switch User</button>
            <button id="loginLogoutBtn" style="background:#eee;border:none;border-radius:8px;padding:8px 16px;cursor:pointer;">Login</button>
            <div class="profile" style="position:relative;">
                <label for="profileUpload" style="cursor:pointer;">
                    <img id="profileImg" src="" alt="Profile" style="width:40px;height:40px;border-radius:50%;background:#eee;object-fit:cover;">
                </label>
                <input type="file" id="profileUpload" accept="image/*" style="display:none;" onchange="uploadProfile(event)">
            </div>
        </div>
    </div>
    <div class="container">
        <div class="sidebar">
            <h3>Menu</h3>
            <ul>
                <li onclick="showFeed()">Home</li>
                <li onclick="showReels()">Reels</li>
                <li onclick="showStories()">Stories</li>
                <li onclick="showNotes()">Notes</li>
                <li>Messages</li>
                <li>Notifications</li>
                <li id="profileMenu" style="position:relative;" onclick="toggleProfileSubmenu(event)">Profile
                    <div id="profileSubmenu" style="display:none;position:absolute;left:100%;top:0;background:#fff;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.12);padding:8px 0;min-width:140px;z-index:1000;">
                        <!-- Dynamic submenu options -->
                    </div>
                </li>
            </ul>
        </div>
        <div class="feed" id="feedSection">
            <div class="new-post">
                <textarea id="postText" rows="3" placeholder="What's on your mind?"></textarea>
                <input type="file" id="postImage" accept="image/*" style="margin-top:8px;">
                <div id="postPreview"></div>
                <button onclick="addPost()">Post</button>
            </div>
            <div id="posts"></div>
        </div>
        <div class="feed" id="reelsSection" style="display:none;">
            <div class="new-post">
                <input type="file" id="reelVideo" accept="video/*" style="margin-bottom:8px;">
                <input type="file" id="reelSong" accept="audio/*" style="margin-bottom:8px;">
                <div id="reelPreview"></div>
                <button onclick="addReel()">Post Reel</button>
            </div>
            <div id="reels"></div>
        </div>
        <div class="feed" id="storiesSection" style="display:none;">
            <div class="new-post">
                <textarea id="storyText" rows="2" placeholder="Share a story..."></textarea>
                <input type="file" id="storyImage" accept="image/*,video/*" style="margin-top:8px;">
                <input type="file" id="storySong" accept="audio/*" style="margin-top:8px;">
                <div id="storyPreview"></div>
                <button onclick="addStory()">Post Story</button>
            </div>
            <div id="stories"></div>
        </div>
        <div class="feed" id="notesSection" style="display:none;">
            <div class="new-post">
                <textarea id="noteText" rows="1" maxlength="60" placeholder="Share a note..."></textarea>
                <input type="file" id="noteSong" accept="audio/*" style="margin-top:8px;">
                <button onclick="addNote()">Post Note</button>
            </div>
            <div id="notes"></div>
        </div>
        <div class="feed" id="profileSection" style="display:none;">
            <div class="new-post" style="margin-bottom:16px;">
                <h2>Your Profile</h2>
                <div style="display:flex;align-items:center;gap:16px;">
                    <img id="profileImgLarge" src="" alt="Profile" style="width:80px;height:80px;border-radius:50%;background:#eee;object-fit:cover;">
                    <div>
                        <input id="profileName" type="text" placeholder="Your Name" style="font-size:1.2em;padding:6px 10px;border-radius:8px;border:1px solid #ddd;">
                        <button onclick="saveProfile()" style="margin-left:8px;background:#1877f2;color:#fff;border:none;border-radius:8px;padding:6px 16px;font-size:1em;cursor:pointer;">Save</button>
                    </div>
                </div>
            </div>
            <div>
                <h3>Your Posts</h3>
                <div id="profilePosts"></div>
                <h3 style="margin-top:32px;">Your Reels</h3>
                <div id="profileReels"></div>
            </div>
        </div>
    </div>
    <div id="searchResults" style="display:none;position:absolute;top:60px;left:50%;transform:translateX(-50%);background:#fff;z-index:500;min-width:300px;max-width:90vw;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.15);padding:16px;"></div>
    <style id="darkModeStyle"></style>
    <script>
    // --- Display Name Modal ---
function promptDisplayName() {
    document.getElementById('nameModal').style.display = 'flex';
    document.getElementById('displayNameInput').value = '';
}
function saveDisplayName() {
    const name = document.getElementById('displayNameInput').value.trim();
    if(!name) return alert('Please enter a display name!');
    localStorage.setItem('reels_user_display_name', name);
    document.getElementById('nameModal').style.display = 'none';
    loadProfileImg();
    loadPosts();
    loadReels();
    loadStories();
}
// --- Update Login/Guest to prompt for display name ---
function onGoogleSignIn(response) {
    const data = parseJwt(response.credential);
    localStorage.setItem('reels_user_email', data.email);
    localStorage.setItem('reels_user_name', data.name);
    localStorage.setItem('reels_profile_img', data.picture);
    document.getElementById('loginModal').style.display = 'none';
    setTimeout(promptDisplayName, 200);
    loadProfileImg();
}
function continueAsGuest() {
    localStorage.setItem('reels_user_email', 'guest');
    localStorage.setItem('reels_user_name', 'Guest');
    document.getElementById('loginModal').style.display = 'none';
    setTimeout(promptDisplayName, 200);
    loadProfileImg();
}
// --- Use display name in posts ---
function getDisplayName() {
    return localStorage.getItem('reels_user_display_name') || 'User';
}
// --- Feed & Posts with Like/Comment ---
function addPost() {
    const text = document.getElementById('postText').value;
    const imgInput = document.getElementById('postImage');
    if(!text && !imgInput.files[0]) return alert('Write something or add an image!');
    const posts = JSON.parse(localStorage.getItem('reels_posts')||'[]');
    const user = getDisplayName();
    let post = {user, text, img: null, time: new Date().toLocaleString(), likes: 0, comments: []};
    if(imgInput.files[0]) {
        const reader = new FileReader();
        reader.onload = function(ev) {
            post.img = ev.target.result;
            posts.unshift(post);
            localStorage.setItem('reels_posts', JSON.stringify(posts));
            document.getElementById('postText').value = '';
            imgInput.value = '';
            loadPosts();
        }
        reader.readAsDataURL(imgInput.files[0]);
    } else {
        posts.unshift(post);
        localStorage.setItem('reels_posts', JSON.stringify(posts));
        document.getElementById('postText').value = '';
        loadPosts();
    }
}
function loadPosts() {
    const posts = JSON.parse(localStorage.getItem('reels_posts')||'[]');
    const postsDiv = document.getElementById('posts');
    const currentUser = getDisplayName();
    postsDiv.innerHTML = posts.map((post, i) => `
        <div class="post">
            <span class="user">${post.user}</span>
            <span class="time">${post.time}</span>
            <div class="content">${highlightTags(post.text ? post.text : '')}</div>
            ${post.img ? `<img src="${post.img}" style="max-width:100%;border-radius:8px;margin-top:8px;">` : ''}
            <div class="actions">
                <span onclick="likePost(${i})">üëç Like (${post.likes||0})</span>
                <span onclick="toggleComments(${i})">üí¨ Comment (${post.comments?post.comments.length:0})</span>
                <span>Share</span>
                ${post.user === currentUser ? `<span style="color:#e74c3c;cursor:pointer;" onclick="deletePost(${i})">Delete</span>` : ''}
            </div>
            <div id="comments-${i}" style="display:none;margin-top:10px;">
                <div>${(post.comments||[]).map(c=>`<div style='margin-bottom:4px;'><b>${c.user}:</b> ${c.text}</div>`).join('')}</div>
                <input type="text" id="commentInput-${i}" placeholder="Add a comment..." style="width:70%;padding:4px 8px;border-radius:6px;border:1px solid #ddd;">
                <button onclick="addComment(${i})" style="padding:4px 10px;border-radius:6px;border:none;background:#1877f2;color:#fff;">Post</button>
            </div>
        </div>
    `).join('');
}
function likePost(i) {
    const posts = JSON.parse(localStorage.getItem('reels_posts')||'[]');
    posts[i].likes = (posts[i].likes||0)+1;
    localStorage.setItem('reels_posts', JSON.stringify(posts));
    loadPosts();
}
function toggleComments(i) {
    const el = document.getElementById('comments-'+i);
    if(el) el.style.display = el.style.display==='none' ? 'block' : 'none';
}
function addComment(i) {
    const input = document.getElementById('commentInput-'+i);
    const text = input.value.trim();
    if(!text) return;
    const posts = JSON.parse(localStorage.getItem('reels_posts')||'[]');
    if(!posts[i].comments) posts[i].comments = [];
    posts[i].comments.push({user:getDisplayName(), text});
    localStorage.setItem('reels_posts', JSON.stringify(posts));
    input.value = '';
    loadPosts();
    toggleComments(i);
    toggleComments(i);
}
function deletePost(i) {
    let posts = JSON.parse(localStorage.getItem('reels_posts')||'[]');
    const currentUser = getDisplayName();
    if(posts[i].user !== currentUser) {
        alert('You can only delete your own posts.');
        return;
    }
    posts.splice(i, 1);
    localStorage.setItem('reels_posts', JSON.stringify(posts));
    loadPosts();
}
// --- Reel Functions ---
function addReel() {
    const videoInput = document.getElementById('reelVideo');
    const audioInput = document.getElementById('reelSong');
    if (!videoInput.files[0]) {
        alert('Please select a video to upload as a reel!');
        return;
    }
    const reels = JSON.parse(localStorage.getItem('reels_reels')||'[]');
    const user = getDisplayName();
    let reel = {user, time: new Date().toLocaleString(), video: null, audio: null};
    const reader = new FileReader();
    reader.onload = function(ev) {
        reel.video = ev.target.result;
        if (audioInput.files[0]) {
            const audioReader = new FileReader();
            audioReader.onload = function(aev) {
                reel.audio = aev.target.result;
                reels.unshift(reel);
                localStorage.setItem('reels_reels', JSON.stringify(reels));
                videoInput.value = '';
                audioInput.value = '';
                loadReels();
            };
            audioReader.readAsDataURL(audioInput.files[0]);
        } else {
            reels.unshift(reel);
            localStorage.setItem('reels_reels', JSON.stringify(reels));
            videoInput.value = '';
            audioInput.value = '';
            loadReels();
        }
    };
    reader.readAsDataURL(videoInput.files[0]);
}

function loadReels() {
    const reels = JSON.parse(localStorage.getItem('reels_reels')||'[]');
    const reelsDiv = document.getElementById('reels');
    reelsDiv.innerHTML = reels.map((reel, i) => `
        <div class="post">
            <span class="user">${reel.user}</span>
            <span class="time">${reel.time}</span>
            <div class="content">Reel Video:</div>
            ${reel.video ? `<video src="${reel.video}" controls style="width:100%;border-radius:8px;margin-top:8px;"></video>` : ''}
            ${reel.audio ? `<div style='margin-top:8px;'>Audio: <audio src="${reel.audio}" controls></audio></div>` : ''}
        </div>
    `).join('');
}
// --- Profile Image ---
    function uploadProfile(e) {
        const file = e.target.files[0];
        if(file) {
            const reader = new FileReader();
            reader.onload = function(ev) {
                localStorage.setItem('reels_profile_img', ev.target.result);
                document.getElementById('profileImg').src = ev.target.result;
            }
            reader.readAsDataURL(file);
        }
    }
    function loadProfileImg() {
        const img = localStorage.getItem('reels_profile_img');
        document.getElementById('profileImg').src = img ? img : '';
    }
    // --- Logout ---
    function logout() {
        localStorage.removeItem('reels_user_email');
        localStorage.removeItem('reels_user_name');
        localStorage.removeItem('reels_profile_img');
        updateLoginLogoutBtn();
        location.reload();
    }
    // --- Dark Mode ---
    function toggleDarkMode() {
        const dark = document.body.classList.toggle('dark-mode');
        document.getElementById('darkModeBtn').innerText = dark ? '‚òÄÔ∏è' : 'üåô';
        document.getElementById('darkModeStyle').innerHTML = dark ? `
            body { background: #18191a; color: #e4e6eb; }
            .header, .sidebar, .post, .new-post, #searchResults, #notificationBar { background: #242526 !important; color: #e4e6eb !important; }
            input, textarea, button { background: #3a3b3c !important; color: #e4e6eb !important; border-color: #555 !important; }
        ` : '';
        localStorage.setItem('reels_dark_mode', dark ? '1' : '0');
    }
    if(localStorage.getItem('reels_dark_mode')==='1') setTimeout(toggleDarkMode, 100);
    // --- Search ---
    function searchContent() {
        const q = document.getElementById('searchInput').value.trim().toLowerCase();
        const resultsDiv = document.getElementById('searchResults');
        if(!q) { resultsDiv.style.display='none'; return; }
        let posts = JSON.parse(localStorage.getItem('reels_posts')||'[]');
        let reels = JSON.parse(localStorage.getItem('reels_reels')||'[]');
        let users = [localStorage.getItem('reels_user_name')||'You'];
        let postResults = posts.filter(p=>p.text && p.text.toLowerCase().includes(q));
        let reelResults = reels.filter(r=>r.time && r.time.toLowerCase().includes(q));
        let userResults = users.filter(u=>u.toLowerCase().includes(q));
        let html = '';
        if(userResults.length) html += '<b>Users:</b><br>' + userResults.map(u=>`<div>@${u}</div>`).join('');
        if(postResults.length) html += '<b>Posts:</b><br>' + postResults.map(p=>`<div>${highlightTags(p.text)}</div>`).join('');
        if(reelResults.length) html += '<b>Reels:</b><br>' + reelResults.map(r=>`<div>${highlightTags(r.time)}</div>`).join('');
        resultsDiv.innerHTML = html || 'No results.';
        resultsDiv.style.display = 'block';
    }
    document.body.addEventListener('click', function(e){
        if(e.target.id!=='searchInput') document.getElementById('searchResults').style.display='none';
    });
    // --- Hashtags & Mentions ---
    function highlightTags(text) {
        if(!text) return '';
        return text.replace(/(#[\w]+)/g, '<span style="color:#1877f2;">$1</span>')
                   .replace(/(@[\w]+)/g, '<span style="color:#43a047;">$1</span>');
    }
    // Media Preview for Post
    document.getElementById('postImage').addEventListener('change', function(e) {
        const preview = document.getElementById('postPreview') || document.createElement('div');
        preview.id = 'postPreview';
        preview.innerHTML = '';
        if(e.target.files[0]) {
            const file = e.target.files[0];
            if(file.type.startsWith('image/')) {
                const img = document.createElement('img');
                img.src = URL.createObjectURL(file);
                img.style.maxWidth = '100%';
                img.style.borderRadius = '8px';
                preview.appendChild(img);
            }
        }
        e.target.parentNode.appendChild(preview);
    });
    document.getElementById('reelVideo').addEventListener('change', function(e) {
        const preview = document.getElementById('reelPreview') || document.createElement('div');
        preview.id = 'reelPreview';
        preview.innerHTML = '';
        if(e.target.files[0]) {
            const file = e.target.files[0];
            if(file.type.startsWith('video/')) {
                const vid = document.createElement('video');
                vid.src = URL.createObjectURL(file);
                vid.controls = true;
                vid.style.width = '100%';
                vid.style.borderRadius = '8px';
                preview.appendChild(vid);
            }
        }
        e.target.parentNode.appendChild(preview);
    });
    document.getElementById('storyImage').addEventListener('change', function(e) {
        const preview = document.getElementById('storyPreview');
        preview.innerHTML = '';
        if(e.target.files[0]) {
            const file = e.target.files[0];
            if(file.type.startsWith('image/')) {
                const img = document.createElement('img');
                img.src = URL.createObjectURL(file);
                img.style.maxWidth = '100%';
                img.style.borderRadius = '8px';
                preview.appendChild(img);
            } else if(file.type.startsWith('video/')) {
                const vid = document.createElement('video');
                vid.src = URL.createObjectURL(file);
                vid.controls = true;
                vid.style.width = '100%';
                vid.style.borderRadius = '8px';
                preview.appendChild(vid);
            }
        }
    });
    // --- Backend Placeholder ---
    // To use a real backend, replace all localStorage.* calls with API requests to your server.
    // Example: fetch('/api/posts', {method:'POST', body: JSON.stringify(post)})
    // --- Profile Submenu ---
function toggleProfileSubmenu(e) {
    e.stopPropagation();
    const submenu = document.getElementById('profileSubmenu');
    if(submenu.style.display==='block') {
        submenu.style.display = 'none';
        return;
    }
    // Build submenu options
    let loggedIn = !!localStorage.getItem('reels_user_email');
    submenu.innerHTML = `
        <div style="padding:8px 16px;cursor:pointer;" onclick="${loggedIn ? 'logout()' : 'showLoginModal()'};document.getElementById('profileSubmenu').style.display='none'">${loggedIn ? 'Logout' : 'Login'}</div>
        <div style="padding:8px 16px;cursor:pointer;" onclick="triggerProfileUpload();document.getElementById('profileSubmenu').style.display='none'">Change Profile Picture</div>
    `;
    submenu.style.display = 'block';
}
function showLoginModal() {
    document.getElementById('loginModal').style.display = 'flex';
}
function triggerProfileUpload() {
    document.getElementById('profileUpload').click();
}
document.body.addEventListener('click', function(e){
    const submenu = document.getElementById('profileSubmenu');
    if(submenu && submenu.style.display==='block' && !e.target.closest('#profileMenu')) {
        submenu.style.display = 'none';
    }
});
function updateLoginLogoutBtn() {
    const loggedIn = !!localStorage.getItem('reels_user_email');
    const btn = document.getElementById('loginLogoutBtn');
    if(loggedIn) {
        btn.textContent = 'Logout';
        btn.onclick = logout;
    } else {
        btn.textContent = 'Login';
        btn.onclick = showLoginModal;
    }
}
window.onload = function() {
    updateLoginLogoutBtn();
    if(!localStorage.getItem('reels_user_email')) {
        document.getElementById('loginModal').style.display = 'flex';
    } else {
        document.getElementById('loginModal').style.display = 'none';
    }
    loadProfileImg();
    loadPosts();
    loadReels();
    loadStories();
    loadNotes();
}
    </script>
</body>
</html>
